{"number":15,"comment_id":"914403656","body":"Nice spot -yes, that looks a good idea","updated_at":"2021-09-07T15:24:19Z","created_at":"2021-09-07T15:24:19Z","creator_user_login":"malcolmsparks"}
{"number":50,"comment_id":"1236186342","body":"@pwhittin @malcolmsparks cannot recreate. When running site locally, and running the command above, my output is\r\n\r\n```\r\n nmap -A -v -v localhost\r\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-09-03 15:25 EDT\r\nNSE: Loaded 155 scripts for scanning.\r\nNSE: Script Pre-scanning.\r\nNSE: Starting runlevel 1 (of 3) scan.\r\nInitiating NSE at 15:25\r\nCompleted NSE at 15:25, 0.00s elapsed\r\nNSE: Starting runlevel 2 (of 3) scan.\r\nInitiating NSE at 15:25\r\nCompleted NSE at 15:25, 0.00s elapsed\r\nNSE: Starting runlevel 3 (of 3) scan.\r\nInitiating NSE at 15:25\r\nCompleted NSE at 15:25, 0.00s elapsed\r\nInitiating Ping Scan at 15:25\r\nScanning localhost (127.0.0.1) [2 ports]\r\nCompleted Ping Scan at 15:25, 0.00s elapsed (1 total hosts)\r\nInitiating Connect Scan at 15:25\r\nScanning localhost (127.0.0.1) [1000 ports]\r\nDiscovered open port 8001/tcp on 127.0.0.1\r\nDiscovered open port 2021/tcp on 127.0.0.1\r\nCompleted Connect Scan at 15:25, 0.01s elapsed (1000 total ports)\r\nInitiating Service scan at 15:25\r\nScanning 2 services on localhost (127.0.0.1)\r\nCompleted Service scan at 15:25, 11.06s elapsed (2 services on 1 host)\r\nNSE: Script scanning 127.0.0.1.\r\nNSE: Starting runlevel 1 (of 3) scan.\r\nInitiating NSE at 15:25\r\nCompleted NSE at 15:25, 0.30s elapsed\r\nNSE: Starting runlevel 2 (of 3) scan.\r\nInitiating NSE at 15:25\r\nCompleted NSE at 15:25, 0.01s elapsed\r\nNSE: Starting runlevel 3 (of 3) scan.\r\nInitiating NSE at 15:25\r\nCompleted NSE at 15:25, 0.00s elapsed\r\nNmap scan report for localhost (127.0.0.1)\r\nHost is up, received conn-refused (0.000019s latency).\r\nScanned at 2022-09-03 15:25:26 EDT for 11s\r\nNot shown: 998 closed tcp ports (conn-refused)\r\nPORT     STATE SERVICE  REASON  VERSION\r\n2021/tcp open  http     syn-ack Jetty 9.4.44.v20210927\r\n|_http-title: Site doesn't have a title (text/plain;charset=utf-8).\r\n|_http-server-header: Jetty(9.4.44.v20210927)\r\n| http-methods:\r\n|   Supported Methods: GET HEAD POST OPTIONS PUT\r\n|_  Potentially risky methods: PUT\r\n8001/tcp open  java-rmi syn-ack Java RMI\r\n| rmi-dumpregistry:\r\n|   jmxrmi\r\n|     javax.management.remote.rmi.RMIServerImpl_Stub\r\n|     @127.0.1.1:37997\r\n|     extends\r\n|       java.rmi.server.RemoteStub\r\n|       extends\r\n|_        java.rmi.server.RemoteObject\r\n\r\nNSE: Script Post-scanning.\r\nNSE: Starting runlevel 1 (of 3) scan.\r\nInitiating NSE at 15:25\r\nCompleted NSE at 15:25, 0.00s elapsed\r\nNSE: Starting runlevel 2 (of 3) scan.\r\nInitiating NSE at 15:25\r\nCompleted NSE at 15:25, 0.00s elapsed\r\nNSE: Starting runlevel 3 (of 3) scan.\r\nInitiating NSE at 15:25\r\nCompleted NSE at 15:25, 0.00s elapsed\r\nRead data files from: /nix/store/b78v66zss99dbjc16fav6gi1ppwjsxgc-nmap-7.92/bin/../share/nmap\r\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\r\nNmap done: 1 IP address (1 host up) scanned in 11.74 seconds\r\n```","updated_at":"2022-09-03T19:27:39Z","created_at":"2022-09-03T19:27:39Z","creator_user_login":"samrose"}
{"number":50,"comment_id":"1238271900","body":"I just did a ```git clone``` of site (version 429efcd717fbc7a17f1eb20ca5b964b1915ad34a), and I configured it:\r\n\r\n1. Copied ```site/etc/config.edn``` into my ```~/.config/site``` directory\r\n2. Removed the existing ```~/.local/share/site/```\r\n\r\nNext I executed the following:\r\n```bash\r\nbin/site-server 2>&1 | tee site-server.log\r\n```\r\nSee the attached ```site-server.log``` file.\r\n\r\nNext I executed the following:\r\n```bash\r\nnmap -A -v -v localhost 2>&1 | tee nmap.log\r\n```\r\nSee the attached ```nmap.log``` file.\r\n\r\nWithin the file ```site-server.log``` note the following lines:\r\n```java\r\n2022-09-06 08:33:02.009:WARN:oejs.HttpChannel:qtp1492187284-23: /\r\njava.lang.NullPointerException: Cannot invoke \"java.lang.CharSequence.length()\" because \"this.text\" is null\r\n\tat java.base/java.util.regex.Matcher.getTextLength(Matcher.java:1769)\r\n\tat java.base/java.util.regex.Matcher.reset(Matcher.java:415)\r\n\tat java.base/java.util.regex.Matcher.<init>(Matcher.java:252)\r\n\tat java.base/java.util.regex.Pattern.matcher(Pattern.java:1134)\r\n\tat clojure.core$re_matcher.invokeStatic(core.clj:4881)\r\n\tat clojure.core$re_matcher.invoke(core.clj:4874)\r\n\tat juxt.reap.alpha.regex$input.invokeStatic(regex.clj:75)\r\n\tat juxt.reap.alpha.regex$input.invoke(regex.clj:74)\r\n\tat juxt.site.alpha.handler$wrap_initialize_request$fn__24906.invoke(handler.clj:1057)\r\n\tat juxt.site.alpha.handler$wrap_healthcheck$fn__24933.invoke(handler.clj:1153)\r\n\tat juxt.site.alpha.handler$wrap_ring_1_adapter$fn__24914.invoke(handler.clj:1107)\r\n\tat ring.adapter.jetty$proxy_handler$fn__8456.invoke(jetty.clj:27)\r\n\tat ring.adapter.jetty.proxy$org.eclipse.jetty.server.handler.AbstractHandler$ff19274a.handle(Unknown Source)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n\tat org.eclipse.jetty.server.Server.handle(Server.java:516)\r\n\tat org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:400)\r\n\tat org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:645)\r\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:392)\r\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:277)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105)\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:338)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:315)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:173)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produce(EatWhatYouKill.java:137)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n```\r\n\r\nI've attached the following files:\r\n\r\n- ```git.log```, showing the result of executing ```git log | head```\r\n- ```nmap.log```, showing the output of ```nmap -A -v -v localhost```\r\n- ```site-server.log```, showing the output of ```site-server```\r\n- ```system.log```, showing information about the Linux system hosting ```site``` and ```nmap```\r\n\r\n\r\n\r\n[git.log](https://github.com/juxt/site/files/9498027/git.log)\r\n[nmap.log](https://github.com/juxt/site/files/9498028/nmap.log)\r\n[site-server.log](https://github.com/juxt/site/files/9498029/site-server.log)\r\n[system.log](https://github.com/juxt/site/files/9498031/system.log)\r\n","updated_at":"2022-09-06T14:58:41Z","created_at":"2022-09-06T14:58:41Z","creator_user_login":"pwhittin"}
{"number":81,"comment_id":"1176040787","body":"### <span aria-hidden=\"true\">‚úÖ</span> Deploy Preview for *juxtsite* canceled.\n\n\n|  Name | Link |\n|---------------------------------|------------------------|\n|<span aria-hidden=\"true\">üî®</span> Latest commit | 9dc3ab77ce254720a9f7c4d01a16157fb30c6c60 |\n|<span aria-hidden=\"true\">üîç</span> Latest deploy log | https://app.netlify.com/sites/juxtsite/deploys/62c55ff4ccb25c0008b14d16 |","updated_at":"2022-07-06T10:12:10Z","created_at":"2022-07-06T10:11:47Z","creator_user_login":"netlify[bot]"}
{"number":37,"comment_id":"996803930","body":"100% agree","updated_at":"2021-12-17T15:20:53Z","created_at":"2021-12-17T15:20:53Z","creator_user_login":"malcolmsparks"}
{"number":21,"comment_id":"939301857","body":"After further investigation, the regex used to extract the username & password from the decoded token doesn't like symbols in the password.\r\n\r\nSo I'd suggest an update to the Test drive to add the -n flag to pass generate to exclude symbols from the password:\r\n\r\n`pass generate -n site/local/admin`\r\n\r\nWith that change the Test drive worked as described.","updated_at":"2021-10-09T13:59:06Z","created_at":"2021-10-09T13:59:06Z","creator_user_login":"admarrs"}
{"number":21,"comment_id":"939464364","body":"Thanks for this - I've made the change you suggested to the documentation.","updated_at":"2021-10-10T11:22:17Z","created_at":"2021-10-10T11:22:17Z","creator_user_login":"malcolmsparks"}
{"number":21,"comment_id":"939465356","body":"I'm still puzzled as to why this occurred. If you have a moment, could you paste me a bit more detail, or a password that causes the issue?","updated_at":"2021-10-10T11:29:21Z","created_at":"2021-10-10T11:29:21Z","creator_user_login":"malcolmsparks"}
{"number":21,"comment_id":"939503690","body":"The generated password that caused the problem was <d\"DWP+\"g/egZyR:`rYQ#QiXv\r\n\r\nFrom the repl\r\n```\r\nsite > clj\r\nClojure 1.10.1\r\nuser=> (re-matches #\"([^:]*):([^:]*)\" 'admin:<d\"DWP+\"g/egZyR:`rYQ#QiXv')\r\nSyntax error reading source at (REPL:2:55).\r\nInvalid token: g/egZyR:\r\nuser/rYQ#QiXv'\r\nSyntax error reading source at (REPL:2:66).\r\nUnmatched delimiter: )\r\nuser=> \r\n```","updated_at":"2021-10-10T15:40:07Z","created_at":"2021-10-10T15:37:53Z","creator_user_login":"admarrs"}
{"number":21,"comment_id":"939508486","body":"Thanks very much for sending this in, it's really helpful and I was able to spot the bug straight-away. The regex is wrong, it should almost certainly be `([^:]*):(.*)` to allow passwords to have colons. If you don't mind, I'll re-open this issue in lieu of fixing this (and testing).\r\n\r\nNote, when fixing this bug, remove the `-n` flag to the `pass generate` flag, as it won't be necessary.","updated_at":"2021-10-10T16:08:28Z","created_at":"2021-10-10T16:07:10Z","creator_user_login":"malcolmsparks"}
{"number":21,"comment_id":"1033555186","body":"Hi , i done all steps but i get this error;\r\nNot Found [Error](http://localhost:2021/_site/requests/8aaf39bfa10b230a03e92204)\r\nUnauthorized [Error](http://localhost:2021/_site/requests/be1e2063663cd03b9d777419)","updated_at":"2022-02-09T09:34:35Z","created_at":"2022-02-09T09:34:35Z","creator_user_login":"burakakca"}
{"number":21,"comment_id":"1035546468","body":"> Hi , i done all steps but i get this error;\n> \n> Not Found [Error](http://localhost:2021/_site/requests/8aaf39bfa10b230a03e92204)\n> \n> Unauthorized [Error](http://localhost:2021/_site/requests/be1e2063663cd03b9d777419)\n\nHi, we're currently rewriting all the authn/authz parts of site so this is problem won't exist in a few weeks when that gets merged but for now you can do one of the following things to solve this:\n- Put a rule into site that allows access to any resource (this effectively removes all auth so don't do this if you have anything to hide!) The rule looks like this(sorry for formatting, on my phone)\n {:xt/id \"{{base-uri}}/_site/rules/make-public\",\n :juxt.site.alpha/description \"for testing\"\n :juxt.site.alpha/type \"Rule\"\n :juxt.pass.alpha/effect :juxt.pass.alpha/allow\n :juxt.pass.alpha/target\n []}\n- install the login page module, or make something that follows the same pattern. See opt/login-page readme for the details on that. Once you install it you should get redirected to the login page where you enter the credentials you set up when installing site.\n\nHopefully that helps ","updated_at":"2022-02-10T21:38:02Z","created_at":"2022-02-10T21:38:02Z","creator_user_login":"armincerf"}
{"number":21,"comment_id":"1042897083","body":"I tried but does not change . Also can't find the opt/login-page.","updated_at":"2022-02-17T12:25:41Z","created_at":"2022-02-17T12:25:41Z","creator_user_login":"burakakca"}
